<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng ký</title>
    <link rel="stylesheet" th:href="@{/css/register.css}">
</head>
<body>
    <div class="register-container">
        <h2>Tạo tài khoản đăng nhập</h2>
        <form th:action="@{/user-create}" th:object="${user}" method="post">
            <label for="hoTen">Họ và tên:</label>
            <input type="text" id="hoTen" th:field="*{hoTen}" required>

            <label for="userName">Tên đăng nhập:</label>
            <input type="text" id="userName" th:field="*{username}" required>

            <label for="password">Mật khẩu:</label>
            <input type="password" id="password" th:field="*{password}" required>

            <div class="radio-group">
                <label>Thuộc nhóm:</label>
                <input type="radio" id="roleNhanVien" th:field="*{role}" value="ROLE_EMPLOYEE" required> Nhân viên
                <input type="radio" id="roleNhaDauTu" th:field="*{role}" value="ROLE_INVESTOR"> Nhà đầu tư
            </div>

            <div id="mkgdGroup" class="mkgd-group" style="display:none;">
                <label for="mkgd">Mật khẩu giao dịch:</label>
                <input type="password" id="mkgd" name="mkGiaoDich" th:field="*{mkGiaoDich}">
            </div>

            <button type="submit">Tạo tài khoản</button>
            <button type="button"
                    th:onclick="|window.location.href='/admin/user/delete?userName=${user.username}'|"
                    th:disabled="${user.username == null}">
                Xóa tài khoản
            </button>
        </form>

        <p th:if="${error}" class="error" th:text="${error}"></p>
        <p th:if="${success}" class="success" th:text="${success}"></p>
    </div>
</body>

<script th:inline="javascript">
	function toggleMKGDField() {
	    const roleInvestor = document.getElementById('roleNhaDauTu');
	    const mkgdGroup = document.getElementById('mkgdGroup');
	    if (roleInvestor.checked) {
	        mkgdGroup.style.display = 'block';
	    } else {
	        mkgdGroup.style.display = 'none';
	    }
	}

	document.addEventListener('DOMContentLoaded', () => {
	    toggleMKGDField();
	    document.getElementById('roleNhanVien').addEventListener('change', toggleMKGDField);
	    document.getElementById('roleNhaDauTu').addEventListener('change', toggleMKGDField);
	});
</script>
</html>
